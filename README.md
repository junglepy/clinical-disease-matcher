# Clinical Disease Matcher

–°–∏—Å—Ç–µ–º–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –¥–∏–∞–≥–Ω–æ–∑–æ–≤ —Å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π OMIM/MONDO.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å –∫–æ–¥–∞–º–∏ OMIM –∏ MONDO
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ Excel/CSV —Ñ–∞–π–ª–æ–≤** —Å –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤** —Å –¥–∏–∞–≥–Ω–æ–∑–∞–º–∏ –∏ –≥–µ–Ω–∞–º–∏
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –∫–æ–º–±–∏–Ω–∞—Ü–∏—è BM25 –ø–æ–∏—Å–∫–∞ –∏ LLM

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. API —Å–µ—Ä–≤–µ—Ä (`api/`)
REST API —Å–µ—Ä–≤–∏—Å –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π:
- **BM25 –ø–æ–∏—Å–∫** –ø–æ –±–∞–∑–∞–º OMIM/MONDO
- **LLM –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ**
- **–ü–æ–∏—Å–∫ –ø–æ –≥–µ–Ω–∞–º** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### 2. CLI –∫–ª–∏–µ–Ω—Ç (`cli/`)
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ CLI**:
```bash
cd cli
./scripts/install.sh
```

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—à—É –æ–±–æ–ª–æ—á–∫—É –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ PATH. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `source ~/.zshrc` (–∏–ª–∏ `~/.bashrc`).

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API**:
```bash
clinical-matcher configure --api-url http://api-server:8002
```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤**:
```bash
clinical-matcher process –¥–∞–Ω–Ω—ã–µ.xlsx
clinical-matcher process --output-dir results/ —Ñ–∞–π–ª1.xlsx —Ñ–∞–π–ª2.csv
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º):
```bash
./scripts/download-datasets.sh
```

2. **–ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞**:
```bash
cd api
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env - –¥–æ–±–∞–≤—å—Ç–µ OPENAI_API_KEY

# –ß–µ—Ä–µ–∑ Docker
docker build -t clinical-api .
docker run -p 8002:8002 --env-file .env clinical-api

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
pip install -r requirements.txt
python main.py
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
Excel/CSV —Ñ–∞–π–ª—ã —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
- **–î–∏–∞–≥–Ω–æ–∑** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–µ–∫—Å—Ç –¥–∏–∞–≥–Ω–æ–∑–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º/–∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- **–ì–µ–Ω** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–∏–º–≤–æ–ª –≥–µ–Ω–∞ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª + –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏:
- `OMIM_–∫–æ–¥` - –∫–æ–¥ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –≤ –±–∞–∑–µ OMIM
- `MONDO_–∫–æ–¥` - –∫–æ–¥ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –≤ –±–∞–∑–µ MONDO
- `–ù–∞–∑–≤–∞–Ω–∏–µ_–∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- `–¢—Ä–µ–±—É–µ—Ç_—É—Ç–æ—á–Ω–µ–Ω–∏—è` - –ø–æ–º–µ—Ç–∫–∏ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API —Å–µ—Ä–≤–µ—Ä
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `api/.env`:
```env
OPENAI_API_KEY=your-api-key 
OPENAI_MODEL=qwen2.5-coder:7b-instruct-q8_0
```

### CLI –∫–ª–∏–µ–Ω—Ç
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `~/.config/clinical-matcher/config.json`:
```json
{
  "api_url": "http://localhost:8002",
  "max_concurrent": 5,
  "timeout": 60
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–¢–æ—á–Ω–æ—Å—Ç—å**: ~91% –¥–ª—è –¥–∏–∞–≥–Ω–æ–∑–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≥–µ–Ω–∞
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 5-20 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç LLM)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ 10 –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç–µ—Å—Ç–æ–≤

| –î–∞—Ç–∞ | –ú–æ–¥–µ–ª—å | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | OMIM Acc | MONDO Acc | OMIM MRR | MONDO MRR |
|------|--------|-------------|----------|-----------|----------|-----------|
| 2025-08-01 | qwen2.5-coder:7b | hybrid_bm25_llm | 79.0% | 79.0% | 0.870 | 0.870 |
| 2025-08-01 | qwen/qwen3-32b | hybrid_bm25_llm | 87.2% | 87.2% | 0.919 | 0.919 |
| 2025-08-01 | gpt-4.1-mini | hybrid_bm25_llm | 97.5% | 97.5% | 0.985 | 0.985 |
| 2025-08-01 | gpt-4.1-mini | hybrid_bm25_llm | 93.0% | 93.0% | 0.958 | 0.958 |
| 2025-07-29 | gpt-4.1-mini | hybrid_bm25_llm | 96.8% | 96.8% | 0.979 | 0.979 |
| 2025-07-29 | gpt-4.1-mini | expert_voting | 76.8% | 76.8% | 0.815 | 0.815 |
| 2025-07-28 | gpt-4.1-nano | hybrid_bm25_llm | 89.0% | 89.0% | 0.929 | 0.929 |
| 2025-07-28 | gpt-4.1-mini | hybrid_bm25_llm | 91.2% | 91.2% | 0.953 | 0.953 |
| 2025-07-28 | gpt-4.1-mini | hybrid_bm25_llm | 86.0% | 86.0% | 0.918 | 0.918 |
| 2025-07-27 | gpt-4.1-mini | hybrid_bm25_llm | 82.8% | 82.8% | 0.894 | 0.894 |

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
clinical-disease-matcher/
‚îú‚îÄ‚îÄ api/                    # API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ src/               # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ prompts/           # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ cli/                    # CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ clinical_matcher/   # Python –ø–∞–∫–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ scripts/           # –£—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ datasets/              # –î–∞–Ω–Ω—ã–µ OMIM/MONDO
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ examples/              # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –¢–µ—Å—Ç—ã CLI
clinical-matcher test

# –¢–µ—Å—Ç—ã API
cd api
pytest tests/
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è CLI](cli/README.md)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](api/README.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/architecture.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](examples/)